<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>민생지원금 및 상생페이백 정보</title> <!--제작자: JTech_CO-->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', 'Inter', sans-serif;
        }
        .chartjs-tooltip {
            font-family: 'Noto Sans KR', 'Inter', sans-serif !important;
        }
        .content-fade {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .tab-btn.active {
            border-color: #3b82f6;
            color: #3b82f6;
            background-color: #eff6ff;
        }
        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type=number] {
            -moz-appearance: textfield;
        }
    </style>
</head>
<body class="bg-slate-50 text-gray-800">

    <div class="container mx-auto p-4 sm:p-6 md:p-8 max-w-4xl">
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-2">민생회복 지원 정책 통합 안내</h1>
            <p class="text-gray-600">2차 민생회복 지원금과 상생페이백 제도에 대한 모든 정보를 알기 쉽게 정리했습니다.</p>
        </header>

        <div class="mb-8 border-b border-gray-200">
            <nav class="flex -mb-px space-x-2" aria-label="Tabs">
                <button id="tab-support" class="tab-btn active w-1/2 py-4 px-1 text-center border-b-2 font-semibold text-base transition-colors duration-200">
                    🪙 2차 민생회복 지원금
                </button>
                <button id="tab-payback" class="tab-btn w-1/2 py-4 px-1 text-center border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 font-semibold text-base transition-colors duration-200">
                    🛍️ 상생페이백
                </button>
            </nav>
        </div>

        <!-- 탭 -->
        <main>
            <!-- 2차 민생회복 지원금 -->
            <div id="content-support" class="content-fade">
                <section class="bg-white p-6 rounded-2xl shadow-md mb-8">
                    <h2 class="text-2xl font-bold mb-4 text-blue-600">📋 민생회복 지원금이란?</h2>
                    <p class="text-gray-700 leading-relaxed">
                        고물가 등으로 어려움을 겪는 국민 생활의 안정을 돕고 내수 경제 활성화를 위해 정부가 국민의 90%를 대상으로 지급하는 지원금입니다. 1차 지원에 이어 추가로 지급되는 '2차 민생회복 소비쿠폰'입니다.
                    </p>
                </section>
        
                <section class="bg-white p-6 rounded-2xl shadow-md mb-8">
                    <h2 class="text-2xl font-bold mb-2 text-blue-600">📊 지원 대상 및 금액</h2>
                    <p class="text-gray-600 mb-6">아래 버튼을 클릭하여 그룹별 총 지원 금액(1차+2차)을 확인해 보세요.</p>
                    
                    <div id="user-group-buttons" class="flex flex-wrap justify-center gap-2 mb-6">
                        <button data-group="general" class="group-btn bg-blue-500 text-white px-4 py-2 rounded-full font-semibold shadow hover:bg-blue-600 transition-all duration-200">일반국민</button>
                        <button data-group="lowIncome" class="group-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-full font-semibold shadow hover:bg-gray-300 transition-all duration-200">차상위·한부모</button>
                        <button data-group="recipient" class="group-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-full font-semibold shadow hover:bg-gray-300 transition-all duration-200">기초수급자</button>
                        <button data-group="top10" class="group-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-full font-semibold shadow hover:bg-gray-300 transition-all duration-200">상위 10%</button>
                    </div>
        
                    <div class="grid md:grid-cols-2 gap-6 items-center">
                        <div>
                            <canvas id="supportAmountChart"></canvas>
                        </div>
                        <div id="chart-description" class="text-center md:text-left bg-blue-50 p-4 rounded-lg">
                        </div>
                    </div>
                     <div class="mt-6 text-sm text-gray-500 bg-gray-100 p-4 rounded-lg">
                        <p><strong class="font-semibold text-gray-700">💡 추가 지원 안내 (1차 지급분)</strong></p>
                        <p>• <strong class="text-indigo-600">비수도권 거주자:</strong> 1차 지급 시 3만원 추가 지원</p>
                        <p>• <strong class="text-indigo-600">농어촌 인구감소지역 거주자:</strong> 1차 지급 시 5만원 추가 지원</p>
                        <p class="mt-2">* 추가 지원은 중복 적용되지 않으며, 더 유리한 조건 하나만 적용됩니다.</p>
                    </div>
                </section>
                
                <section class="bg-white p-6 rounded-2xl shadow-md mb-8">
                    <h2 class="text-2xl font-bold mb-4 text-blue-600">🔍 2차 지원금 대상자격 자가진단</h2>
                    <div class="bg-gray-50 p-4 rounded-lg mb-6 border border-gray-200">
                        <h3 class="font-semibold text-gray-800 mb-2">건강보험료 확인 방법</h3>
                        <p class="text-gray-600 text-sm mb-4">정확한 자가진단을 위해 2025년 6월분 건강보험료를 확인해야 합니다. 아래 버튼을 통해 국민건강보험공단 홈페이지에서 간편하게 조회할 수 있습니다.</p>
                        <a href="https://www.nhis.or.kr" target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center bg-blue-500 text-white px-5 py-2 rounded-lg font-semibold hover:bg-blue-600 transition-colors text-sm shadow">
                            건강보험공단 홈페이지 바로가기
                        </a>
                    </div>

                    <div id="calculator">
                        <div class="grid md:grid-cols-2 gap-4 mb-4">
                            <div>
                                <label for="household-size" class="block text-sm font-medium text-gray-700">가구원 수</label>
                                <select id="household-size" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md">
                                    <option value="1">1인</option>
                                    <option value="2">2인</option>
                                    <option value="3">3인</option>
                                    <option value="4" selected>4인</option>
                                    <option value="5">5인</option>
                                    <option value="6">6인</option>
                                    <option value="7">7인</option>
                                    <option value="8">8인</option>
                                    <option value="9">9인</option>
                                    <option value="10">10인 이상</option>
                                </select>
                            </div>
                            <div>
                                <label for="insurance-type" class="block text-sm font-medium text-gray-700">가입 유형</label>
                                <select id="insurance-type" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md">
                                    <option value="직장">직장가입자</option>
                                    <option value="지역">지역가입자</option>
                                    <option value="혼합">혼합 (직장+지역)</option>
                                </select>
                            </div>
                        </div>
                        <div class="mb-4">
                             <label for="health-insurance-fee" class="block text-sm font-medium text-gray-700">가구 총 월 건강보험료 (원)</label>
                             <input type="number" id="health-insurance-fee" placeholder="숫자만 입력 (예: 350000)" class="mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md">
                        </div>
                        <div class="mb-4">
                             <label for="property-tax-base" class="block text-sm font-medium text-gray-700">가구 총 재산세 과세표준 (원)</label>
                             <input type="number" id="property-tax-base" placeholder="고액자산가 확인용 (선택)" class="mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md">
                        </div>
                         <div class="mb-6">
                             <label for="financial-income" class="block text-sm font-medium text-gray-700">가구 총 금융소득 (원)</label>
                             <input type="number" id="financial-income" placeholder="고액자산가 확인용 (선택)" class="mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md">
                        </div>
                        <button id="calculate-btn" class="w-full bg-green-500 text-white font-bold py-3 px-4 rounded-lg hover:bg-green-600 transition-colors shadow-lg">
                            지원 대상 여부 확인하기
                        </button>
                    </div>
                    <div id="calculator-result" class="mt-6 p-4 rounded-lg hidden"></div>
                </section>

                <section class="bg-white p-6 rounded-2xl shadow-md mb-8">
                    <h2 class="text-2xl font-bold mb-4 text-blue-600">🗓️ 신청 및 사용 기간</h2>
                    <div class="space-y-4">
                        <div class="bg-gray-100 p-4 rounded-lg"><h3 class="font-semibold text-lg text-gray-800">1️⃣ 1차 지급</h3><p class="text-gray-600"><strong class="font-medium">신청 기간:</strong> 2025년 7월 21일 (월) ~ 9월 12일 (금)</p></div>
                        <div class="bg-gray-100 p-4 rounded-lg"><h3 class="font-semibold text-lg text-gray-800">2️⃣ 2차 지급</h3><p class="text-gray-600"><strong class="font-medium">신청 기간:</strong> 2025년 9월 22일 (월) ~ 10월 31일 (금)</p></div>
                        <div class="bg-red-100 border-l-4 border-red-500 p-4 rounded-lg"><h3 class="font-semibold text-lg text-red-800">❗️ 사용 마감</h3><p class="text-red-700"><strong class="font-medium">공통 사용 기한:</strong> 2025년 11월 30일 (일) 까지</p><p class="text-red-700 text-sm mt-1">* 기간 내 사용하지 않은 잔액은 소멸됩니다.</p></div>
                    </div>
                </section>

                <section class="bg-white p-6 rounded-2xl shadow-md mb-8">
                    <h2 class="text-2xl font-bold mb-4 text-blue-600">❓ 자주 묻는 질문 (FAQ)</h2>
                    <div class="space-y-3" id="faq-support-container"></div>
                </section>

                <section class="bg-white p-6 rounded-2xl shadow-md mb-8">
                    <h2 class="text-2xl font-bold mb-4 text-blue-600">💳 카드사별 신청 안내</h2>
                    <p class="text-gray-600 mb-6">
                        사용하시는 카드를 선택하여 2차 민생회복 지원금 신청 페이지로 바로 이동할 수 있습니다.
                    </p>
                    <div id="card-links-container" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-3 gap-4">
                    </div>
                </section>
            </div>

            <!-- 상생페이백 -->
            <div id="content-payback" class="hidden content-fade">
                <section class="bg-white p-6 rounded-2xl shadow-md mb-8">
                    <h2 class="text-2xl font-bold mb-4 text-green-600">🛍️ 상생페이백이란?</h2>
                    <p class="text-gray-700 leading-relaxed">
                        작년보다 카드를 더 많이 쓰면, 늘어난 소비액의 일부를 돌려주는 소비 환급 제도입니다. 소비를 촉진하고 소상공인을 지원하기 위한 민생회복 지원사업의 일환으로, 민생회복 지원금과는 별도입니다.
                    </p>
                </section>

                <section class="bg-white p-6 rounded-2xl shadow-md mb-8">
                    <h2 class="text-2xl font-bold mb-4 text-green-600">⚙️ 어떻게 진행되나요?</h2>
                    <div class="space-y-4">
                        <div class="flex items-start bg-gray-50 p-4 rounded-lg">
                            <div class="flex-shrink-0 w-10 h-10 bg-green-500 text-white rounded-full flex items-center justify-center font-bold text-lg mr-4">1</div>
                            <div>
                                <h3 class="font-semibold text-gray-800">작년 월평균 사용액 확인</h3>
                                <p class="text-gray-600 text-sm">2024년 한 해 동안 사용한 카드값을 기준으로 월평균 소비액을 계산해요.</p>
                            </div>
                        </div>
                        <div class="flex items-start bg-gray-50 p-4 rounded-lg">
                            <div class="flex-shrink-0 w-10 h-10 bg-green-500 text-white rounded-full flex items-center justify-center font-bold text-lg mr-4">2</div>
                            <div>
                                <h3 class="font-semibold text-gray-800">올해 9~11월 카드 사용</h3>
                                <p class="text-gray-600 text-sm">행사 기간(9~11월) 동안 카드를 사용하면, 작년 월평균보다 얼마나 더 썼는지 계산돼요.</p>
                            </div>
                        </div>
                         <div class="flex items-start bg-gray-50 p-4 rounded-lg">
                            <div class="flex-shrink-0 w-10 h-10 bg-green-500 text-white rounded-full flex items-center justify-center font-bold text-lg mr-4">3</div>
                            <div>
                                <h3 class="font-semibold text-gray-800">증가분의 20% 환급</h3>
                                <p class="text-gray-600 text-sm">더 많이 쓴 금액의 20%를 다음 달 15일에 디지털 온누리상품권으로 돌려받아요!</p>
                            </div>
                        </div>
                    </div>
                     <div class="mt-6 text-center bg-green-50 p-6 rounded-2xl">
                        <p class="text-lg font-semibold text-gray-800">월 최대 <span class="text-green-600 font-bold text-xl">10만원</span>, 3개월간 총 <span class="text-green-600 font-bold text-xl">30만원</span>까지 환급!</p>
                    </div>
                </section>
                
                <section class="bg-white p-6 rounded-2xl shadow-md mb-8">
                     <h2 class="text-2xl font-bold mb-4 text-green-600">🗓️ 신청 기간</h2>
                     <div class="bg-gray-100 p-4 rounded-lg text-center">
                        <p class="text-gray-800 text-lg">
                            <strong class="font-semibold">2025년 9월 15일 (월) ~ 11월 30일 (일)</strong>
                        </p>
                    </div>
                    <div class="text-center mt-6">
                        <a href="https://상생페이백.kr" target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center bg-green-500 text-white px-8 py-3 rounded-lg font-semibold hover:bg-green-600 transition-colors text-base shadow-lg">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path d="M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"></path><path d="M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"></path></svg>
                            상생페이백 공식 홈페이지에서 신청
                        </a>
                    </div>
                </section>

                <section class="bg-white p-6 rounded-2xl shadow-md mb-8">
                    <h2 class="text-2xl font-bold mb-4 text-blue-600">🛒 실적 인정/제외 사용처</h2>
                    <p class="text-gray-600 mb-4">상생페이백은 민생지원금과 사용처 기준이 다릅니다. 소비 실적으로 인정되는 곳과 제외되는 곳을 꼭 확인하세요!</p>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="bg-green-50 p-4 rounded-lg border border-green-200"><h3 class="text-xl font-semibold text-green-800 mb-3">✅ 실적 인정</h3><ul class="space-y-2 text-gray-700"><li class="flex items-start"><span class="mr-2 mt-1">🍽️</span><span>전통시장, 동네마트, 식당, 카페 등 대부분의 소상공인 점포</span></li><li class="flex items-start"><span class="mr-2 mt-1">🏨</span><span>숙박, 관광, 학원, 병원, 약국 등</span></li> <li class="flex items-start"><span class="mr-2 mt-1">🛵</span><span>배달앱 (단, 배달원을 통한 현장 결제 시)</span></li><li class="flex items-start"><span class="mr-2 mt-1">🍿</span><span>영화관, 서점 등 문화/여가 시설</span></li></ul><p class="text-xs text-gray-500 mt-4">* 프랜차이즈의 경우 직영점이 아닌 가맹점은 실적으로 인정됩니다.</p></div>
                        <div class="bg-red-50 p-4 rounded-lg border border-red-200"><h3 class="text-xl font-semibold text-red-800 mb-3">❌ 실적 제외</h3><ul class="space-y-2 text-gray-700"><li class="flex items-start"><span class="mr-2 mt-1">🏢</span><span>백화점, 대형마트, 아울렛, 복합쇼핑몰</span></li><li class="flex items-start"><span class="mr-2 mt-1">🌐</span><span>온라인 쇼핑몰, 홈쇼핑, 배달앱 내 결제</span></li><li class="flex items-start"><span class="mr-2 mt-1">🚗</span><span>신차 구매, 명품 구매</span></li> <li class="flex items-start"><span class="mr-2 mt-1">🏢</span><span>일부 대기업 직영 매장 (전자제품, 가구 등)</span></li><li class="flex items-start"><span class="mr-2 mt-1">🎫</span><span>상품권, 선불카드 충전 및 구매</span></li><li class="flex items-start"><span class="mr-2 mt-1">🧾</span><span>공과금, 보험료, 세금, 통신료 등</span></li></ul></div>
                    </div>
                </section>

                <section class="bg-white p-6 rounded-2xl shadow-md mb-8">
                    <h2 class="text-2xl font-bold mb-4 text-blue-600">❓ 자주 묻는 질문 (FAQ)</h2>
                    <div class="space-y-3" id="faq-payback-container"></div>
                </section>
            </div>

            <!-- 공통 섹션 -->
             <section class="bg-white p-6 rounded-2xl shadow-md mb-8">
                <h2 class="text-2xl font-bold mb-4 text-blue-600">📍 지역별 상세 정보 및 가맹점 조회</h2>
                <p class="text-gray-600 mb-6">
                    민생지원금 사용처, 온누리상품권 가맹점 등 상세 정보는 행정안전부의 '내 고장 알리미'에서 조회하실 수 있습니다.
                </p>
                <div class="text-center">
                    <a href="https://www.laiis.go.kr/lips/mlo/lcl/localGiftList.do" target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center bg-gray-700 text-white px-8 py-3 rounded-lg font-semibold hover:bg-gray-800 transition-colors text-base shadow-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" /></svg>
                        내 고장 알리미에서 조회하기
                    </a>
                </div>
            </section>
        </main>
        
        <footer class="text-center mt-10 text-sm text-gray-500">
            <p>본 페이지는 제공된 공식 자료를 바탕으로 제작된 정보 안내 페이지입니다.</p>
            <p>최신 정보 및 세부 사항은 아래 공식 홈페이지를 참고하시기 바랍니다.</p>
            <div class="flex justify-center space-x-4 mt-2">
                <a href="https://www.mois.go.kr/frt/sub/a06/b07/livelihoodCoupon/screen.do" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">
                민생회복 지원금 (행정안전부)
                </a>
                <a href="https://상생페이백.kr" target="_blank" rel="noopener noreferrer" class="text-green-600 hover:underline">
                상생페이백 (중소벤처기업부)
                </a>
            </div>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // --- 데이터 ---
            const supportData = {
                general: { label: '일반국민', amounts: [15, 10], description: "<strong>일반국민</strong>은 1차 15만원, 2차 10만원으로 <strong>총 25만원</strong>을 지원받습니다. 비수도권/인구감소지역 거주 시 추가 지원금이 있습니다." },
                lowIncome: { label: '차상위·한부모', amounts: [30, 10], description: "<strong>차상위계층 및 한부모가족</strong>은 1차 30만원, 2차 10만원으로 <strong>총 40만원</strong>을 지원받습니다. 비수도권/인구감소지역 거주 시 추가 지원금이 있습니다." },
                recipient: { label: '기초수급자', amounts: [40, 10], description: "<strong>기초생활수급자</strong>는 1차 40만원, 2차 10만원으로 <strong>총 50만원</strong>을 지원받습니다. 비수도권/인구감소지역 거주 시 추가 지원금이 있습니다." },
                top10: { label: '상위 10%', amounts: [15, 0], description: "<strong>상위 10%</strong>는 1차 15만원을 지원받으며, 2차 추가 지급 대상에서는 제외됩니다. 비수도권/인구감소지역 거주 시 추가 지원금이 있습니다." }
            };
            
            const faqSupportData = [
                { q: "외국인도 지원금을 받을 수 있나요?", a: "원칙적으로 대한민국 국민을 대상으로 하므로 제외됩니다. 다만, 내국인과 동일한 건강보험 자격을 갖춘 결혼이민자, 영주권자 등 일부는 예외적으로 지급 대상에 포함될 수 있습니다." },
                { q: "미성년자도 직접 신청할 수 있나요?", a: "아니요, 미성년자는 원칙적으로 세대주가 대신 신청해야 합니다. 단, 예외적인 경우(세대주가 없거나, 세대주가 신청 불가능한 경우 등)에는 직접 신청이 가능할 수 있습니다." },
                { q: "신청 기간을 놓치면 어떻게 되나요?", a: "지정된 신청 기간(1차, 2차)이 지나면 신청할 수 없으므로, 반드시 기간 내에 신청해야 지원금을 받을 수 있습니다." },
                { q: "이사하면 사용 지역을 변경할 수 있나요?", a: "네, 이사 후 전입신고를 마쳤다면 변경된 주소지에서 지원금을 사용할 수 있습니다. 단, 이미 지급받은 카드의 종류(선불카드 등)에 따라 사용 지역 변경이 제한될 수 있으니, 주민센터에 문의하는 것이 가장 정확합니다." },
                { q: "배달앱에서 사용하고 싶은데, 어떻게 해야 하나요?", a: "배달앱을 통해 주문하더라도, 결제 방식이 '만나서 결제' 또는 '현장 결제'인 경우에만 지원금 사용이 가능합니다. 앱 내에서 미리 결제하는 방식은 대부분 사용이 불가능합니다." }
            ];

            const faqPaybackData = [
                { q: "상생페이백은 누가 신청할 수 있나요?", a: "2024년에 신용카드나 체크카드를 한 번이라도 사용한 실적이 있는 만 19세 이상이라면 누구나 신청할 수 있습니다. 2차 민생지원금 대상이 아니어도 신청 가능합니다." },
                { q: "작년 카드 사용액이 없거나 적으면 불리한가요?", a: "아닙니다. 작년 월평균 사용액이 기준이 되므로, 작년에 카드를 적게 썼다면 올해 조금만 더 써도 소비 증가율이 높아져 환급받기 더 쉬울 수 있습니다." },
                { q: "환급받은 '디지털 온누리상품권'은 어디서 쓰나요?", a: "전통시장 및 상점가 등 전국의 온누리상품권 가맹점에서 사용할 수 있습니다. '온누리상품권' 앱을 통해 가맹점을 쉽게 찾을 수 있습니다. 유효기간은 지급일로부터 5년입니다." },
                { q: "여러 카드를 쓰는데 실적은 어떻게 합산되나요?", a: "상생페이백 홈페이지에서 신청 시, 본인이 소유한 모든 카드의 사용 실적이 자동으로 합산되어 계산되므로 편리합니다." },
                { q: "신청 기간을 놓치면 어떻게 되나요?", a: "11월 30일까지 신청하면 9월, 10월 소비 증가분까지 모두 소급하여 환급받을 수 있습니다. 하지만 최종 신청 기간이 지나면 혜택을 받을 수 없으니 잊지 말고 신청해야 합니다." }
            ];
            
            const cardData = [
                { name: '신한카드', url: 'https://www.shinhancard.com/pconts/html/myPage/governmentSupport/MOBFM591N/MOBFM591NR01.html' },
                { name: '삼성카드', url: 'https://www.samsungcard.com/personal/aid/UHPPAS1416M0.jsp?click=pcmenu_sobicoupon2_2509' },
                { name: '롯데카드', url: 'https://jiwon3.lottecard.co.kr/app/LPEMREA_V100.lc#none' },
                { name: '우리카드', url: 'https://m.wooricard.com/dcmw/CONTENTS/CNTNTS/yh1/M1MCD204S49.do' },
                { name: '하나카드', url: 'https://m.hanacard.co.kr/MKGAAV9100M.web'},
                { name: 'NH농협카드', url: 'https://nhpay.nonghyup.com/vu/VU400110F' },
                { name: 'KB국민카드', url: 'https://m.kbcard.com/BON/DVIEW/MBHV0901?mainCC=a' },
                { name: 'BC카드', url: 'https://go.bccard.com/' },
                { name: '카카오뱅크', url: 'https://www.kakaobank.com/Corp/News/Notices/view/17416' },
                { name: '토스뱅크', url: 'https://www.tossbank.com/articles/livelihoodcoupon-2' },
                { name: '네이버페이', url: 'https://new-m.pay.naver.com/gov/sobicoupon' }
            ];
            
            // --- 자가진단 계산기 ---
            const healthInsuranceCriteria = {
                // 가구원 수: { 직장가입자, 지역가입자, 혼합가입자 } (단위: 원)
                1: { '직장': 220000, '지역': 180000, '혼합': 230000 },
                2: { '직장': 370000, '지역': 340000, '혼합': 380000 },
                3: { '직장': 450000, '지역': 430000, '혼합': 470000 },
                4: { '직장': 510000, '지역': 500000, '혼합': 540000 },
                5: { '직장': 580000, '지역': 570000, '혼합': 600000 },
                6: { '직장': 640000, '지역': 630000, '혼합': 660000 },
                7: { '직장': 700000, '지역': 690000, '혼합': 720000 },
                8: { '직장': 760000, '지역': 750000, '혼합': 780000 },
                9: { '직장': 820000, '지역': 810000, '혼합': 840000 },
                10: { '직장': 880000, '지역': 870000, '혼합': 900000 }
            };
            const PROPERTY_CUTOFF = 1200000000; // 12억원
            const INCOME_CUTOFF = 20000000; // 2천만원


            const tabSupportBtn = document.getElementById('tab-support');
            const tabPaybackBtn = document.getElementById('tab-payback');
            const contentSupport = document.getElementById('content-support');
            const contentPayback = document.getElementById('content-payback');

            tabSupportBtn.addEventListener('click', () => {
                tabSupportBtn.classList.add('active');
                tabPaybackBtn.classList.remove('active');
                contentSupport.classList.remove('hidden');
                contentPayback.classList.add('hidden');
                contentSupport.classList.add('content-fade');
            });

            tabPaybackBtn.addEventListener('click', () => {
                tabPaybackBtn.classList.add('active');
                tabSupportBtn.classList.remove('active');
                contentPayback.classList.remove('hidden');
                contentSupport.classList.add('hidden');
                contentPayback.classList.add('content-fade');
            });


            // --- 차트 ---
            const ctx = document.getElementById('supportAmountChart').getContext('2d');
            const chartDescriptionEl = document.getElementById('chart-description');
            let supportChart;
            function createOrUpdateChart(groupKey) {
                const data = supportData[groupKey];
                chartDescriptionEl.innerHTML = `<h3 class="text-xl font-bold mb-2 text-gray-900">${data.label} 지원금액</h3><p class="leading-relaxed text-gray-700">${data.description}</p>`;
                if (supportChart) {
                    supportChart.data.datasets[0].data = data.amounts;
                    supportChart.data.datasets[0].label = data.label + ' 지원금 (만원)';
                    supportChart.update();
                } else {
                    supportChart = new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: ['1차 지급', '2차 지급'],
                            datasets: [{
                                label: data.label + ' 지원금 (만원)',
                                data: data.amounts,
                                backgroundColor: ['rgba(59, 130, 246, 0.7)', 'rgba(167, 139, 250, 0.7)'],
                                borderColor: ['rgba(59, 130, 246, 1)', 'rgba(167, 139, 250, 1)'],
                                borderWidth: 1
                            }]
                        },
                        options: {
                            responsive: true, maintainAspectRatio: false,
                            plugins: { legend: { display: false }, tooltip: { callbacks: { label: (c) => `${c.dataset.label}: ${c.raw}만원` } } },
                            scales: { y: { beginAtZero: true, title: { display: true, text: '금액 (만원)' } } }
                        }
                    });
                }
            }
            document.querySelectorAll('.group-btn').forEach(button => {
                button.addEventListener('click', () => {
                    document.querySelectorAll('.group-btn').forEach(btn => {
                        btn.classList.remove('bg-blue-500', 'text-white');
                        btn.classList.add('bg-gray-200', 'text-gray-700');
                    });
                    button.classList.add('bg-blue-500', 'text-white');
                    button.classList.remove('bg-gray-200', 'text-gray-700');
                    createOrUpdateChart(button.dataset.group);
                });
            });

            // --- FAQ ---
            function createFaq(containerId, data) {
                const container = document.getElementById(containerId);
                container.innerHTML = '';
                data.forEach(item => {
                    const faqItem = document.createElement('div');
                    faqItem.className = 'border border-gray-200 rounded-lg';
                    faqItem.innerHTML = `<button class="w-full flex justify-between items-center text-left p-4 focus:outline-none"><span class="font-semibold text-gray-800">${item.q}</span><svg class="w-5 h-5 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button><div class="px-4 pb-4 text-gray-600 leading-relaxed hidden">${item.a}</div>`;
                    container.appendChild(faqItem);
                });
                container.addEventListener('click', e => {
                    const button = e.target.closest('button');
                    if (!button) return;
                    button.nextElementSibling.classList.toggle('hidden');
                    button.querySelector('svg').classList.toggle('rotate-180');
                });
            }

            // --- 카드사 링크 ---
            const cardLinksContainer = document.getElementById('card-links-container');
            cardData.forEach(card => {
                const link = document.createElement('a');
                link.href = card.url;
                link.target = '_blank';
                link.rel = 'noopener noreferrer';
                link.className = 'flex items-center justify-center p-4 bg-gray-100 rounded-lg font-semibold text-gray-800 hover:bg-blue-100 hover:text-blue-700 transition-colors text-center shadow';
                link.textContent = card.name;
                cardLinksContainer.appendChild(link);
            });

            // --- 자가진단 계산기 ---
            const calculateBtn = document.getElementById('calculate-btn');
            const resultDiv = document.getElementById('calculator-result');

            calculateBtn.addEventListener('click', () => {
                const householdSize = document.getElementById('household-size').value;
                const insuranceType = document.getElementById('insurance-type').value;
                const fee = parseInt(document.getElementById('health-insurance-fee').value, 10) || 0;
                const property = parseInt(document.getElementById('property-tax-base').value, 10) || 0;
                const income = parseInt(document.getElementById('financial-income').value, 10) || 0;

                resultDiv.classList.remove('hidden', 'bg-green-100', 'text-green-800', 'bg-red-100', 'text-red-800', 'bg-yellow-100', 'text-yellow-800');
                
                if (fee === 0) {
                    resultDiv.classList.add('bg-red-100', 'text-red-800');
                    resultDiv.innerHTML = `<h4 class="font-bold">입력 오류</h4><p>건강보험료를 정확히 입력해주세요.</p>`;
                    resultDiv.classList.remove('hidden');
                    return;
                }

                // 고액자산가 컷오프 기준
                if (property > PROPERTY_CUTOFF || income > INCOME_CUTOFF) {
                    let reason = '';
                    if (property > PROPERTY_CUTOFF) {
                        reason = `가구의 재산세 과세표준 합계액(${property.toLocaleString()}원)이 기준(${PROPERTY_CUTOFF.toLocaleString()}원)을 초과합니다.`;
                    } else {
                        reason = `가구의 금융소득 합계액(${income.toLocaleString()}원)이 기준(${INCOME_CUTOFF.toLocaleString()}원)을 초과합니다.`;
                    }
                    resultDiv.classList.add('bg-yellow-100', 'text-yellow-800');
                    resultDiv.innerHTML = `<h4 class="font-bold">모의 진단 결과: 지원 대상 제외 (고액 자산가)</h4><p>${reason}</p><p class="text-xs mt-2">* 본 결과는 입력된 값을 바탕으로 한 모의 계산이며, 실제와 다를 수 있습니다.</p>`;
                    resultDiv.classList.remove('hidden');
                    return;
                }

                // 건강보험료 기준
                const criteria = healthInsuranceCriteria[householdSize][insuranceType];
                if (fee <= criteria) {
                    resultDiv.classList.add('bg-green-100', 'text-green-800');
                    resultDiv.innerHTML = `<h4 class="font-bold">모의 진단 결과: 지원 대상에 해당될 가능성이 높습니다.</h4>
                        <p>입력하신 건강보험료(${fee.toLocaleString()}원)는 가구원 수 및 가입 유형에 따른 기준액(${criteria.toLocaleString()}원) 이하입니다.</p>
                        <p class="mt-2">정확한 대상 여부는 카드사 등을 통해 반드시 확인하시기 바랍니다.</p>
                        <p class="text-xs mt-2">* 본 결과는 입력된 값을 바탕으로 한 모의 계산이며, 실제와 다를 수 있습니다.</p>`;
                } else {
                    resultDiv.classList.add('bg-red-100', 'text-red-800');
                    resultDiv.innerHTML = `<h4 class="font-bold">모의 진단 결과: 지원 대상이 아닐 가능성이 높습니다.</h4>
                        <p>입력하신 건강보험료(${fee.toLocaleString()}원)가 가구원 수 및 가입 유형에 따른 기준액(${criteria.toLocaleString()}원)을 초과합니다.</p>
                        <p class="text-xs mt-2">* 본 결과는 입력된 값을 바탕으로 한 모의 계산이며, 실제와 다를 수 있습니다.</p>`;
                }

                resultDiv.classList.remove('hidden');
            });


            // --- 초기화 ---
            createOrUpdateChart('general');
            createFaq('faq-support-container', faqSupportData);
            createFaq('faq-payback-container', faqPaybackData);
        });
    </script>
</body>
</html>
